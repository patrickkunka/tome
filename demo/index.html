<!DOCTYPE html>
<html>
    <head>
        <style>
            .editor {
                width: 30%;
                min-height: 400px;
                display: inline-block;
                vertical-align: top;
                background: white;
            }

            .editor:focus {
                outline: none;
            }

            .pre {
                width: 30%;
                height: auto;
                vertical-align: top;
                display: inline-block;
            }

            .plaintext {
                display: inline-block;
                vertical-align: top;
                width:  30%;
                min-height: 400px;
            }
        </style>
        <title>Tome Sandbox</title>
    </head>
    <body style="background: #eee;">
        <div class="editor" contenteditable="true">
        </div>
        <textarea class="plaintext"></textarea>
        <pre class="pre"></pre>
    </body>
    <script src="../dist/tome.js"></script>
    <script>
        const plainText = document.querySelector('textarea');
        const pre       = document.querySelector('pre');

        const editor = tome(document.querySelector('.editor'), {
            value: {
                text: 'Line one.\nLine two.\nLine three.',
                markups: [
                    ['p', 0, 9],
                    //['strong', 4, 9],
                    ['p', 10, 19],
                    //['strong', 10, 19],
                    ['p', 20, 31],
                    //['strong', 20, 24],
                ]
            },
            callbacks: {
                onStateChange: handleStateChange
            }
        });

        function handleStateChange(state, actionType) {
            plainText.value = state.text;
            pre.innerHTML = JSON.stringify(state.markups.map(markup => markup.toArray()), null, 4) + '\n\n' + JSON.stringify(state.activeInlineMarkups, null, 4);

            console.log(actionType);
        }
    </script>
</html>